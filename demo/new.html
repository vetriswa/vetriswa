<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<header>Appointment Booking App</header>

<body>

    <body>
        <form onsubmit="saveToLocalStorage(event)">

            <input type="text" name="name" />
            <input type="tel" name="phonenumber" />
            <button>submit</button><br>
            <button onclick="myFunction()">edit</button>
            <button onclick="myFunction()">delete</button>
        </form>
        <ul id="listOfUsers"></ul>
        <script>
            function saveToLocalStorage(event) {
                event.preventDefault();
                const name = event.target.name.value;
                const phonenumber = event.target.phonenumber.value;
                const obj = {
                    name,
                    phonenumber
                }
                localStorage.setItem('obj.name', JSON.stringify(obj))
                showNewUserOnScreen(obj)
            }
            window.addEventListener("DOMContentLoaded"), () => {
                const localStorage = localStorage;
                const localStoragekeys = Object.keys(localStorage)

                for (var i = 0; i < localStorage.length; i++) {
                    const key = localStoragekeys[i]
                    const userDetailsString = localStorageObj[key];
                    const userDetailsObj = JSON.parse(userDetailsString);
                    showNewUserOnScreen(userDetailsObj)
                }
            }

            function showNewUserOnScreen(user) {
                document.getElementById('name').value = '';
                document.getElementById('phonenumber').value = '';
                if (localStorage.getItem(user.name) !== null) {
                    removeUserFromScreen(user.name)
                }
                const ParentNode = document.getElementById('listOfUsers');
                const childHTML = `<li> ${user.name} - ${user.phonenumber}</li>`
                parentNode.innerHTML = parentNode.innerHTML + childHTML;
            }
            functioneditUserDetails(name, phonenumber) {
                document.getElementById('name').value = '';
                document.getElementById('phonenumber').value = '';
                deleteUser(name);
            }

            function deleteUser(name) {
                console.log(name);
                localStorage.removeItem(name);
                removeUserFromScreen(name);
            }

            function removeUserFromScreen(name) {
                const parentNode = document.getElementById('listOfUsers');
                const childNodeToBeDeleted = document.getElementById(name);
                if (childNodeToBeDeleted) {
                    parentNode.removeChild(childNodeToBeDeleted)
                }
            }

            }
        </script>
    </body>

</html>